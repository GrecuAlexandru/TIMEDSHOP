<html lang="en">
    <head>
        <link rel="icon" href="resources/icons/favicon.png" />
        <link rel="stylesheet" href="styles/order.css" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="UTF-8" />
        <title>Order - Timed</title>
        <script src="resources/productPage/productDetails.js"></script>
        <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
        <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
        <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
        <script src="https://js.stripe.com/v3/"></script>
    </head>
    <body>
        <div id="THEDIV">
            <div id="TimedShopMainLogo">
                <img src="resources/icons/TimedShopMainLogo.svg" alt="TIMED SHOP" />
            </div>
            <nav class="navMenu" id="navMenu">
                <a href="sale.html">SALE</a>
                <a href="women.html?sortBy=newArrival&type=" id="women">WOMEN</a>
                <a href="men.html">MEN</a>
                <a href="about.html">ABOUT</a>
                <a href="account.html" id="account">
                    <img
                        alt="ACCOUNT"
                        src="/resources/icons/User.svg"
                        onmouseover="this.src='resources/icons/UserPurple.svg'"
                        onmouseout="this.src='resources/icons/User.svg'"
                    />
                </a>
                <a href="favorites.html" id="favorites">
                    <img
                        class="icon-badge-icon-favorites"
                        id="favoritesIMG"
                        alt="FAVORITES"
                        src="/resources/icons/favorites.svg"
                        onmouseover="this.src='resources/icons/favoritesPurple.svg'"
                        onmouseout="this.src='resources/icons/favorites.svg'"
                    />
                    <div id="favoritesCount" class="icon-badge-favorites">6</div>
                </a>
                <a href="login.html" id="LogIn">LOG IN</a>
                <a href="register.html" id="register">REGISTER</a>
                <a href="cart.html" id="cart" class="icon-badge-container">
                    <img
                        class="icon-badge-icon"
                        alt="CART"
                        src="/resources/icons/Cart.svg"
                        onmouseover="this.src='resources/icons/CartPurple.svg'"
                        onmouseout="this.src='resources/icons/Cart.svg'"
                    />
                    <div id="cartCount" class="icon-badge">6</div>
                </a>
                <div class="dot" id="dott"></div>
            </nav>

            <div id="mainDiv">
                <div id="leftDiv">
                    <a id="orderTitle">ORDER DETAILS</a>
                    <a id="orderDate"></a>
                    <a id="orderID"></a>
                    <div id="divider"></div>
                    <div id="orderShippingDiv">
                        <a id="shippingTitle">Shipping Address</a>
                        <div id="shippingAddressDiv">
                            <div id="countryDiv">
                                <a id="countryTitle">Country:</a>
                                <a id="country"></a>
                            </div>
                            <div id="cityDiv">
                                <a id="cityTitle">City:</a>
                                <a id="city"></a>
                            </div>
                            <div id="stateDiv">
                                <a id="stateTitle">State:</a>
                                <a id="state"></a>
                            </div>
                            <div id="Line1Div">
                                <a id="Line1Title">Line1:</a>
                                <a id="line1"></a>
                            </div>
                            <div id="Line2Div">
                                <a id="Line2Title">Line2:</a>
                                <a id="line2"></a>
                            </div>
                            <div id="postalCodeDiv">
                                <a id="postalCodeTitle">Postal Code:</a>
                                <a id="postalCode"></a>
                            </div>
                        </div>
                        <div id="divider"></div>
                        <div id="clientInfo">
                            <a id="ClientInfoTitle">Client Information</a>
                            <div id="clientNameDiv">
                                <a id="clientNameTitle">Client Name:</a>
                                <a id="clientName"></a>
                            </div>
                            <div id=emailDiv>
                                <a id="emailText">Email: </a>
                                <a id="email"></a>
                            </div>
                            <div id="phoneDiv">
                                <a id="phoneText">Phone</a>
                                <a id="phone"></a>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="rightDiv">
                    <a id="summaryTitle">SUMMARY</a>
                    <div id="summaryDiv">
                        <div id="subtotalDiv">
                            <a id="subtotalText">Subtotal: </a>
                            <a id="subtotalValue">€0.00</a>
                        </div>
                        <div id="shippingCostsDiv">
                            <a id="shippingCostsText">Shipping Costs: </a>
                            <a id="shippingCostsValue">€0.00</a>
                        </div>
                        <div id="divider"></div>
                        <div id="totalDiv">
                            <a id="totalText">Total: </a>
                            <a id="totalValue">€0.00</a>
                        </div>
                    </div>
                    <a id="orderContentTitle">ORDER CONTENT</a>
                    <div id="orderContent">
                        <!-- <div class="orderItem">
                            <img class="orderImage" src="resources/icons/productPageImages/120101.jpg" alt="img">
                            <div class="orderTextDiv">
                                <a class="orderItemTitle">Grey Hoodie</a>
                                <a class="orderItemType">Men's hoodie</a>
                                <div class="orderItemOptions">
                                    <div class="colorDiv">
                                        <a class="orderItemColorTitle">Color:</a>
                                        <div class="orderItemColor"></div>
                                    </div>
                                    <a class="orderItemSizeTitle">Size: S</a>
                                    <a class="orderItemQuantityTitle">Quantity: 3</a>
                                </div>
                                <a class="orderItemPrice">One Piece:&nbsp;&nbsp;€200.00</a>
                            </div>
                        </div> -->
                    </div>
                </div>
            </div>

            <div id="footer">
                <div id="followUsDiv">
                    <a id="followUsText"> FOLLOW US </a>
                    <div id="iconsDiv">
                        <div id="iconsDivTop">
                            <a id="instagram" href="https://www.instagram.com">
                                <img
                                    src="resources/icons/socials/instagram.svg"
                                    alt="instagram"
                                />
                            </a>
                            <a id="tiktok">
                                <img
                                    src="resources/icons/socials/tiktok.svg"
                                    alt="tiktok"
                                />
                            </a>
                        </div>
                        <div id="iconsDivBottom">
                            <a id="twitter">
                                <img
                                    src="resources/icons/socials/twitter.svg"
                                    alt="twitter"
                                />
                            </a>
                            <a id="facebook">
                                <img
                                    src="resources/icons/socials/facebook.svg"
                                    alt="facebook"
                                />
                            </a>
                        </div>
                    </div>
                </div>
                <div id="helpAndInfoDiv">
                    <a id="helpAndInfoText"> HELP AND INFORMATION </a>
                    <div id="HILinks">
                        <a class="alink">Help</a>
                        <a class="alink">Privacy Policy</a>
                        <a class="alink">Terms & Conditions</a>
                        <a class="alink">Delivery</a>
                        <a class="alink">Return</a>
                        <a class="alink">FAQ</a>
                    </div>
                </div>
                <div id="timedShopDiv">
                    <a id="timedShopText">TIMED SHOP</a>
                    <div id="timedShopLinks">
                        <a class="alink">About</a>
                        <a class="alink">Contact</a>
                    </div>
                </div>
            </div>
        </div>
        <div id="loading">
            <div class="wrapper">
                <svg class="hourglass" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 120 206" preserveAspectRatio="none">
                    <path class="middle" d="M120 0H0v206h120V0zM77.1 133.2C87.5 140.9 92 145 92 152.6V178H28v-25.4c0-7.6 4.5-11.7 14.9-19.4 6-4.5 13-9.6 17.1-17 4.1 7.4 11.1 12.6 17.1 17zM60 89.7c-4.1-7.3-11.1-12.5-17.1-17C32.5 65.1 28 61 28 53.4V28h64v25.4c0 7.6-4.5 11.7-14.9 19.4-6 4.4-13 9.6-17.1 16.9z"/>
                    <path class="outer" d="M93.7 95.3c10.5-7.7 26.3-19.4 26.3-41.9V0H0v53.4c0 22.5 15.8 34.2 26.3 41.9 3 2.2 7.9 5.8 9 7.7-1.1 1.9-6 5.5-9 7.7C15.8 118.4 0 130.1 0 152.6V206h120v-53.4c0-22.5-15.8-34.2-26.3-41.9-3-2.2-7.9-5.8-9-7.7 1.1-2 6-5.5 9-7.7zM70.6 103c0 18 35.4 21.8 35.4 49.6V192H14v-39.4c0-27.9 35.4-31.6 35.4-49.6S14 81.2 14 53.4V14h92v39.4C106 81.2 70.6 85 70.6 103z"/>
                </svg>
            </div>
        </div>
        <script>
            function loader(loaded)
            {
                if(loaded)
                {
                    setTimeout(()=>{
                        document.getElementById("loading").style.display = "none";
                        document.getElementById("THEDIV").style.display = "block";
                    }, 1000);
                }
                else
                {
                    setTimeout(()=>{
                        document.getElementById("THEDIV").style.display = "none";
                        document.getElementById("loading").style.display = "flex";
                    }, 1000);
                }
            }
            loader(false);
        </script>
        <script>
            // Initialize Firebase
            // TODO: Replace with your project's customized code snippet
            var config = {
                apiKey: "AIzaSyCkBvDNzSvorpEdz2twDAVI09x-FaVsDGg",
                authDomain: "timedshop-a5a66.firebaseapp.com",
                projectId: "timedshop-a5a66",
                storageBucket: "timedshop-a5a66.appspot.com",
                messagingSenderId: "172835576987",
                appId: "1:172835576987:web:2e588ca7a77cc008affa3e",
                measurementId: "G-3VCHXLRX5K",
            };
            firebase.initializeApp(config);
            const db = firebase.firestore();
            let cartCount = document.getElementById("cartCount");
            firebase.auth().onAuthStateChanged((user) => {
                if (user) {
                    var uid = user.uid;
                    console.log("logged in user: ", user.email);
                    document.getElementById("LogIn").style.display = "none";
                    document.getElementById("register").style.display = "none";
                    document.getElementById("account").style.display = "flex";
                    document.getElementById("favorites").style.display = "block";
                    db.collection("users")
                        .doc(uid)
                        .get()
                        .then((data) => {
                            if(data.data().cart)
                            {
                                cartCount.innerText = data.data().cart.length;
                            }
                            else
                            {
                                cartCount.innerText = 0;
                            }

                            if(data.data().favorites)
                            {
                                favoritesCount.innerText = data.data().favorites.length;
                            }
                            else
                            {
                                favoritesCount.innerText = 0;
                            }
                        })
                } else {
                    // User is signed out
                    window.open("/error.html","_self");
                    console.log("sign out");
                    document.getElementById("account").style.display = "none";
                    document.getElementById("favorites").style.display = "none";
                    document.getElementById("LogIn").style.display = "flex";
                    document.getElementById("register").style.display = "flex";
                }
            });
            function signOut() {
                firebase
                    .auth()
                    .signOut()
                    .then(() => {
                        // Sign-out successful.
                        window.open("/login.html","_self");
                    })
                    .catch((error) => {
                        window.open("/error.html","_self");
                    });
            }
        </script>
        <script src="/resources/order/order.js"></script>
    </body>
</html>
